;;;
;;; 	8251 Console Driver
;;;

INIT:
	;; Reset USART
	MOV	AL,00H
	OUT	USARTC,AL
	NOP
	NOP
	MOV	AL,00H
	OUT	USARTC,AL
	NOP
	NOP
	MOV	AL,00H
	OUT	USARTC,AL
	NOP
	NOP
	MOV	AL,40H
	OUT	USARTC,AL
	NOP
	NOP
	
	;;
	MOV	AL,4EH
	OUT	USARTC,AL
	NOP
	NOP

	;;
	MOV	AL,37H
	OUT	USARTC,AL

	RET

CONIN:
	IN	AL,USARTC
	AND	AL,02H
	JZ	CONIN
	
	IN	AL,USARTD

	RET

CONST:
	IN	AL,USARTC
	AND	AL,02H

	RET

CONOUT:
	PUSH	AX
COUT0:	
	IN	AL,USARTC
	AND	AL,01H
	JZ	COUT0

	POP	AX
	OUT	USARTD,AL

	RET
