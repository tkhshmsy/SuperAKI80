;;;
;;;	8251 Console Driver
;;;

INIT:
	SEX	SP		; Use (SP) as temporary area
	LDI	00H
	STR	SP
	OUT	USARTC
	DEC	SP
	LDI	00H
	STR	SP
	OUT	USARTC
	DEC	SP
	LDI	00H
	STR	SP
	OUT	USARTC
	DEC	SP
	LDI	40H		; Reset
	STR	SP
	OUT	USARTC
	DEC	SP

	LDI	4EH
	STR	SP
	OUT	USARTC
	DEC	SP
	LDI	37H
	STR	SP
	OUT	USARTC
	DEC	SP

	SEP	RETN

CONIN:
	SEX	SP
CIN0:	
	INP	USARTC
	ANI	02H
	BZ	CIN0
	INP	USARTD
	PLO	8
	
	SEP	RETN

CONST:
	SEX	SP
	INP	USARTC
	ANI	02H
	SHR
	PLO	8

	SEP	RETN

CONOUT:
	SEX	SP
COUT0:
	INP	USARTC
	ANI	01H
	BZ	COUT0
	GLO	8
	STR	SP
	OUT	USARTD
	DEC	SP

	SEP	RETN

	
