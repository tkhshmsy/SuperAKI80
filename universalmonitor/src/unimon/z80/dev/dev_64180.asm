;;;
;;;	Hitachi HD64180 ASCI Console Driver
;;;

CNTLA:	EQU	ASBASE+00H
CNTLB:	EQU	ASBASE+02H
STAT:	EQU	ASBASE+04H
TDR:	EQU	ASBASE+06H
RDR:	EQU	ASBASE+08H

	SAVE
	CPU	Z180

INIT:
	LD	A,CNTLB_V
	OUT0	(CNTLB),A
	LD	A,CNTLA_V
	OUT0	(CNTLA),A

	RET

CONIN:
	IN0	A,(STAT)
	AND	80H
	JR	Z,CONIN
	IN0	A,(RDR)

	RET

CONST:
	IN0	A,(STAT)
	AND	80H

	RET

CONOUT:
	PUSH	AF
CO0:
	IN0	A,(STAT)
	AND	02H
	JR	Z,CO0
	POP	AF
	OUT0	(TDR),A
	RET

	RESTORE
